module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},84505,a=>{"use strict";let b=(0,a.i(70106).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],84505)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},94101,a=>{"use strict";let b=(0,a.i(70106).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],94101)},59157,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(84505),e=a.i(94101),f=a.i(11156),g=a.i(41675);let h=(0,a.i(70106).default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);function i(){let[a,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(1),[p,q]=(0,c.useState)({totalSpent:0,totalPayments:0,currentPlan:"Free",nextBilling:"",avgPayment:0});(0,c.useEffect)(()=>{r()},[n]);let r=async()=>{try{let a=await fetch(`/api/user/payments?page=${n}&limit=10`);if(a.ok){let b=await a.json(),c=b.payments||[];i(c),k(b.pagination||{page:1,limit:10,total:c.length,pages:1}),s(c)}else console.error("Failed to fetch payments:",a.status),i([]),k(null),s([])}catch(a){console.error("Error fetching payments:",a),i([]),k(null),s([])}finally{m(!1)}},s=a=>{let b=a.reduce((a,b)=>a+b.amount,0),c=a.length,d=c>0?Math.round(b/c):0;q({totalSpent:b,totalPayments:c,currentPlan:a.length>0?a[0].plan:"Free",nextBilling:a.length>0?new Date(new Date(a[0].createdAt).getTime()+2592e6).toISOString().split("T")[0]:"",avgPayment:d})};return l?(0,b.jsx)("div",{className:"text-white",children:"Loading payments..."}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.CreditCard,{className:"w-6 h-6 text-blue-500"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-white",children:"My Payments"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,b.jsx)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-3 bg-green-500/20 rounded-lg",children:(0,b.jsx)(e.DollarSign,{className:"w-6 h-6 text-green-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Total Spent"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-white",children:["₹",p.totalSpent]})]})]})}),(0,b.jsx)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:(0,b.jsx)(h,{className:"w-6 h-6 text-blue-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Total Payments"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:p.totalPayments})]})]})}),(0,b.jsx)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:(0,b.jsx)(f.CreditCard,{className:"w-6 h-6 text-purple-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Current Plan"}),(0,b.jsx)("p",{className:"text-lg font-bold text-white",children:p.currentPlan})]})]})}),(0,b.jsx)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-3 bg-yellow-500/20 rounded-lg",children:(0,b.jsx)(g.Calendar,{className:"w-6 h-6 text-yellow-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"Next Billing"}),(0,b.jsx)("p",{className:"text-lg font-bold text-white",children:p.nextBilling?new Date(p.nextBilling).toLocaleDateString():"N/A"})]})]})})]}),(0,b.jsxs)("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[(0,b.jsx)("div",{className:"p-6 border-b border-slate-700",children:(0,b.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,b.jsx)(f.CreditCard,{className:"w-5 h-5 text-blue-500"}),"Payment History"]})}),0===a.length?(0,b.jsx)("div",{className:"p-8 text-center",children:(0,b.jsx)("p",{className:"text-slate-400",children:"No payments yet"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left text-sm text-slate-300",children:[(0,b.jsx)("thead",{className:"bg-slate-800 border-b border-slate-700",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Plan"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Amount"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Date"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Invoice"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-800 transition",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-semibold",children:a.plan}),(0,b.jsxs)("td",{className:"px-6 py-4",children:["₹",a.amount]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"completed"===a.status?"bg-green-500/20 text-green-400":"pending"===a.status?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:a.status})}),(0,b.jsx)("td",{className:"px-6 py-4",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.invoiceUrl?(0,b.jsxs)("button",{onClick:()=>{var b;return b=a.invoiceUrl,void window.open(b,"_blank")},className:"flex items-center gap-2 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition text-sm",children:[(0,b.jsx)(d.Download,{className:"w-4 h-4"}),"Download"]}):(0,b.jsx)("span",{className:"text-slate-500",children:"N/A"})})]},a._id))})]})}),j&&j.pages>1&&(0,b.jsx)("div",{className:"p-6 border-t border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>o(Math.max(1,n-1)),disabled:1===n,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:text-slate-500 text-white rounded transition",children:"Previous"}),Array.from({length:j.pages},(a,b)=>b+1).map(a=>(0,b.jsx)("button",{onClick:()=>o(a),className:`px-4 py-2 rounded transition ${n===a?"bg-blue-500 text-white":"bg-slate-700 hover:bg-slate-600 text-white"}`,children:a},a)),(0,b.jsx)("button",{onClick:()=>o(Math.min(j.pages,n+1)),disabled:n===j.pages,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:text-slate-500 text-white rounded transition",children:"Next"})]})})]})]})]})}a.s(["default",()=>i],59157)},42642,a=>{"use strict";var b=a.i(87924),c=a.i(59157),d=a.i(27520);function e(){return(0,b.jsx)(d.default,{children:(0,b.jsx)(c.default,{})})}a.s(["default",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__33bad342._.js.map