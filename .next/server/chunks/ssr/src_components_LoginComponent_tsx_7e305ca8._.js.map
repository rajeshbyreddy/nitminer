{"version":3,"sources":["../../../../src/components/LoginComponent.tsx","../../../../src/components/DuplicateSessionModal.tsx","../../../../src/lib/deviceFingerprint.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { FiMail, FiLock, FiEye, FiEyeOff, FiArrowRight } from 'react-icons/fi';\nimport Link from 'next/link';\nimport Image from \"next/image\"\nimport { signIn, useSession } from 'next-auth/react';\nimport { useRouter } from 'next/navigation';\nimport LoginTypeSelector from './LoginTypeSelector';\nimport DuplicateSessionModal from './DuplicateSessionModal';\nimport { generateDeviceInfo } from '@/lib/deviceFingerprint';\nimport { useSessionValidator, useStorageSessionListener } from '@/hooks/useSessionValidator';\n\ninterface ExistingSession {\n  id: string;\n  deviceName: string;\n  browser: string;\n  os: string;\n  loginTime: string;\n  lastActivity: string;\n  ipAddress: string;\n}\n\nexport default function LoginComponent() {\n  const router = useRouter();\n  const { data: session, status } = useSession();\n  const { validateSession } = useSessionValidator();\n  useStorageSessionListener();\n  \n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    rememberMe: false,\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const [showDuplicateModal, setShowDuplicateModal] = useState(false);\n  const [existingSessions, setExistingSessions] = useState<ExistingSession[]>([]);\n  const [pendingEmail, setPendingEmail] = useState('');\n  const [pendingPassword, setPendingPassword] = useState('');\n  const [deviceInfo, setDeviceInfo] = useState<any>(null);\n\n  // Initialize device info on component mount\n  useEffect(() => {\n    generateDeviceInfo().then((info) => {\n      console.log('Device info generated:', info);\n      setDeviceInfo(info);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (status === 'loading') return;\n    if (session?.user) {\n      // Redirect based on role\n      const dashboardUrl = session.user.role === 'admin' ? '/admin/dashboard' : '/dashboard';\n      router.push(dashboardUrl);\n    }\n  }, [session, status, router]);\n\n  const handleGoogleLogin = async () => {\n    setIsLoading(true);\n    setError('');\n    try {\n      if (!deviceInfo) {\n        setError('Device information could not be loaded. Please try again.');\n        setIsLoading(false);\n        return;\n      }\n\n      // Check for duplicate sessions before Google login\n      // Pass browser info to prevent multi-browser login on same device\n      const checkResponse = await fetch('/api/auth/session/check-duplicate', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          email: session?.user?.email || 'google-user',\n          deviceId: deviceInfo.deviceId,\n          deviceFingerprint: deviceInfo.fingerprint,\n          browser: deviceInfo.browser, // Include browser to prevent multi-browser login\n        }),\n      });\n\n      const checkData = await checkResponse.json();\n      if (checkData.isDuplicate && checkData.existingSessions.length > 0) {\n        setExistingSessions(checkData.existingSessions);\n        setShowDuplicateModal(true);\n        setIsLoading(false);\n        return;\n      }\n\n      const result = await signIn('google', {\n        callbackUrl: '/',\n        redirect: false,\n      });\n\n      if (result?.error) {\n        setError('Google sign-in failed. Please try again.');\n      } else if (result?.ok) {\n        setSuccess(true);\n        // Create session after successful Google login\n        if (session?.user?.id) {\n          await createUserSession(session.user.id, session.user.email || '');\n        }\n      }\n    } catch (err) {\n      setError('Google sign-in failed. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value,\n    }));\n    setError('');\n  };\n\n  const createUserSession = async (userId: string, email: string) => {\n    try {\n      if (!deviceInfo) return;\n\n      const response = await fetch('/api/auth/session/create', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          userId,\n          email,\n          deviceId: deviceInfo.deviceId,\n          deviceFingerprint: deviceInfo.fingerprint,\n          deviceName: deviceInfo.deviceName,\n          browser: deviceInfo.browser,\n          os: deviceInfo.os,\n        }),\n      });\n\n      const data = await response.json();\n      if (data.success && data.sessionToken) {\n        localStorage.setItem('session_token', data.sessionToken);\n        localStorage.setItem('session_id', data.sessionId);\n      }\n    } catch (error) {\n      console.error('Error creating session:', error);\n    }\n  };\n\n  const handleDuplicateModalConfirm = async () => {\n    try {\n      // Invalidate all other sessions\n      if (deviceInfo) {\n        await fetch('/api/auth/session/invalidate-others', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            email: pendingEmail,\n            deviceId: deviceInfo.deviceId,\n          }),\n        });\n      }\n\n      // Clear modal and proceed with login\n      setShowDuplicateModal(false);\n      setPendingEmail('');\n      setPendingPassword('');\n      await performLogin(pendingEmail, pendingPassword);\n    } catch (error) {\n      console.error('Error handling duplicate session:', error);\n      setError('An error occurred. Please try again.');\n    }\n  };\n\n  const performLogin = async (email: string, password: string) => {\n    try {\n      const result = await signIn('credentials', {\n        email,\n        password,\n        redirect: false,\n      });\n\n      if (result?.error) {\n        setError(result.error);\n        return;\n      }\n\n      if (result?.ok) {\n        setSuccess(true);\n        setFormData({ email: '', password: '', rememberMe: false });\n        \n        // Create session record in database after successful login\n        if (deviceInfo) {\n          try {\n            const response = await fetch('/api/auth/session/create', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({\n                userId: session?.user?.id || email, // Use email as fallback\n                email,\n                deviceId: deviceInfo.deviceId,\n                deviceFingerprint: deviceInfo.fingerprint,\n                deviceName: deviceInfo.deviceName,\n                browser: deviceInfo.browser,\n                os: deviceInfo.os,\n              }),\n            });\n\n            const data = await response.json();\n            if (data.success && data.sessionToken) {\n              localStorage.setItem('session_token', data.sessionToken);\n              localStorage.setItem('session_id', data.sessionId);\n            }\n          } catch (error) {\n            console.error('Error creating session:', error);\n          }\n        }\n        \n        // Wait a moment then redirect based on role\n        setTimeout(() => {\n          const dashboardUrl = session?.user?.role === 'admin' ? '/admin/dashboard' : '/dashboard';\n          router.push(dashboardUrl);\n        }, 1000);\n        \n        return;\n      }\n    } catch (err) {\n      setError(err?.message || 'Login failed. Please try again.');\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n    try {\n      if (!formData.email || !formData.password) {\n        setError('Please fill in all fields');\n        setIsLoading(false);\n        return;\n      }\n\n      if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\n        setError('Please enter a valid email address');\n        setIsLoading(false);\n        return;\n      }\n\n      if (formData.password.length < 6) {\n        setError('Password must be at least 6 characters');\n        setIsLoading(false);\n        return;\n      }\n\n      if (!deviceInfo) {\n        setError('Device information could not be loaded. Please try again.');\n        setIsLoading(false);\n        return;\n      }\n\n      // Check for duplicate sessions before login\n      // Pass browser info to prevent multi-browser login on same device\n      const checkResponse = await fetch('/api/auth/session/check-duplicate', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          email: formData.email,\n          deviceId: deviceInfo.deviceId,\n          deviceFingerprint: deviceInfo.fingerprint,\n          browser: deviceInfo.browser, // Include browser to prevent multi-browser login\n        }),\n      });\n\n      const checkData = await checkResponse.json();\n      console.log('Duplicate check response:', checkData);\n      \n      if (checkData.isDuplicate && checkData.existingSessions.length > 0) {\n        // Store pending credentials and show modal\n        console.log('Duplicate session detected, showing modal');\n        setPendingEmail(formData.email);\n        setPendingPassword(formData.password);\n        setExistingSessions(checkData.existingSessions);\n        setShowDuplicateModal(true);\n        setIsLoading(false);\n        return;\n      }\n\n      console.log('No duplicate session, proceeding with login');\n      // No duplicate, proceed with login\n      await performLogin(formData.email, formData.password);\n    } catch (err) {\n      setError(err.message || 'Login failed. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <DuplicateSessionModal\n        isOpen={showDuplicateModal}\n        existingSessions={existingSessions}\n        onConfirm={handleDuplicateModalConfirm}\n        onCancel={() => {\n          setShowDuplicateModal(false);\n          setPendingEmail('');\n          setPendingPassword('');\n        }}\n        isLoading={isLoading}\n      />\n      \n      <main className=\"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-12 bg-gradient-to-b from-slate-50 to-white dark:from-zinc-950 dark:to-black\" style={{ fontFamily: 'Inter, system-ui, sans-serif' }}>\n        <div className=\"w-full max-w-7xl\">\n          {/* Two Column Layout */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-10 gap-0 rounded-2xl overflow-hidden shadow-2xl\">\n            {/* Left Section - Image (60%) */}\n            <div className=\"hidden lg:flex lg:col-span-6 bg-white dark:bg-blue-500 items-center justify-center relative overflow-hidden\">\n              <div className=\"relative z-10 w-full h-full flex items-center justify-center p-8\">\n                <Image \n                  src=\"/auth/login_png.png\" \n                  alt=\"Login Illustration\"\n                  fill\n                  className=\"object-contain\"\n                  priority\n                />\n              </div>\n            </div>\n\n            {/* Right Section - Login Form (40%) */}\n            <div className=\"lg:col-span-4 bg-white dark:bg-zinc-800 flex flex-col justify-center p-8 md:p-10\">\n              {/* Login Type Selector */}\n              <div className=\"mb-6 flex justify-end\">\n                <LoginTypeSelector />\n              </div>\n\n              {/* Login Card */}\n              <div className=\"relative\">\n                {/* Header */}\n                <div className=\"mb-8\">\n                  <h1 className=\"text-4xl font-black text-center text-blue-600 dark:text-blue-400 mb-2\" style={{ fontFamily: 'Space Grotesk, sans-serif' }}>\n                    Welcome Back\n                  </h1>\n                  <p className=\"text-center text-gray-600 dark:text-gray-400 text-sm font-medium\">\n                    Login to your NitMiner account\n                  </p>\n                </div>\n\n                {/* Success Message */}\n                {success && (\n                  <div className=\"mb-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl\">\n                    <p className=\"text-green-700 dark:text-green-400 text-center font-bold\">\n                      ✓ Login successful! Redirecting...\n                    </p>\n                  </div>\n                )}\n\n                {/* Error Message */}\n                {error && (\n                  <div className=\"mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl\">\n                    <p className=\"text-red-700 dark:text-red-400 text-center font-bold\">\n                      ✗ {error}\n                    </p>\n                  </div>\n                )}\n\n                {/* Form */}\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                  {/* Email Input */}\n                  <div className=\"relative group\">\n                    <label htmlFor=\"email\" className=\"block text-sm font-black text-gray-700 dark:text-gray-300 mb-3\" style={{ fontFamily: 'Space Grotesk, sans-serif' }}>\n                      Email Address\n                    </label>\n                    <div className=\"relative\">\n                      <FiMail className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 group-focus-within:text-blue-600 transition-colors\" size={20} />\n                      <input\n                        type=\"email\"\n                        id=\"email\"\n                        name=\"email\"\n                        value={formData.email}\n                        onChange={handleChange}\n                        placeholder=\"your@email.com\"\n                        className=\"w-full pl-12 pr-4 py-3 bg-slate-50 dark:bg-zinc-900 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 text-black dark:text-white placeholder-gray-400 dark:placeholder-gray-500 font-medium\"\n                        disabled={isLoading}\n                      />\n                    </div>\n                  </div>\n\n                  {/* Password Input */}\n                  <div className=\"relative group\">\n                    <label htmlFor=\"password\" className=\"block text-sm font-black text-gray-700 dark:text-gray-300 mb-3\" style={{ fontFamily: 'Space Grotesk, sans-serif' }}>\n                      Password\n                    </label>\n                    <div className=\"relative\">\n                      <FiLock className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 group-focus-within:text-blue-600 transition-colors\" size={20} />\n                      <input\n                        type={showPassword ? 'text' : 'password'}\n                        id=\"password\"\n                        name=\"password\"\n                        value={formData.password}\n                        onChange={handleChange}\n                        placeholder=\"••••••••\"\n                        className=\"w-full pl-12 pr-12 py-3 bg-slate-50 dark:bg-zinc-900 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 text-black dark:text-white placeholder-gray-400 dark:placeholder-gray-500 font-medium\"\n                        disabled={isLoading}\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowPassword(!showPassword)}\n                        className=\"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition-colors\"\n                        disabled={isLoading}\n                      >\n                        {showPassword ? <FiEyeOff size={20} /> : <FiEye size={20} />}\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* Remember Me & Forgot Password */}\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <label className=\"flex items-center gap-2 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        name=\"rememberMe\"\n                        checked={formData.rememberMe}\n                        onChange={handleChange}\n                        className=\"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-600 cursor-pointer\"\n                        disabled={isLoading}\n                      />\n                      <span className=\"text-gray-600 dark:text-gray-400 font-bold\">Remember me</span>\n                    </label>\n                    <Link href=\"#\" className=\"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-black transition-colors\" style={{ fontFamily: 'Space Grotesk, sans-serif' }}>\n                      Forgot password?\n                    </Link>\n                  </div>\n\n                  {/* Submit Button */}\n                  <button\n                    type=\"submit\"\n                    disabled={isLoading || success}\n                    className=\"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-black py-3 px-4 rounded-xl transition-all duration-300 hover:shadow-xl disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                    style={{ fontFamily: 'Space Grotesk, sans-serif' }}\n                  >\n                    {isLoading ? (\n                      <>\n                        <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                        <span>Logging in...</span>\n                      </>\n                    ) : success ? (\n                      <>\n                        <span>✓ Success</span>\n                      </>\n                    ) : (\n                      <>\n                        <span>Login</span>\n                        <FiArrowRight size={20} />\n                      </>\n                    )}\n                  </button>\n                </form>\n\n                {/* Divider */}\n                <div className=\"relative my-8\">\n                  <div className=\"absolute inset-0 flex items-center\">\n                    <div className=\"w-full h-px bg-gray-200 dark:bg-gray-700\"></div>\n                  </div>\n                  <div className=\"relative flex justify-center text-sm\">\n                    <span className=\"px-3 bg-white dark:bg-zinc-800 text-gray-500 dark:text-gray-400 font-bold\">Or continue with</span>\n                  </div>\n                </div>\n\n                {/* Google Sign-In Button */}\n                <button\n                  onClick={handleGoogleLogin}\n                  disabled={isLoading || success}\n                  className=\"w-full flex items-center justify-center gap-3 bg-white dark:bg-zinc-700 hover:bg-gray-50 dark:hover:bg-zinc-600 text-gray-700 dark:text-gray-300 font-black py-3 px-4 rounded-xl transition-all duration-300 shadow-md hover:shadow-lg disabled:opacity-60 disabled:cursor-not-allowed\"\n                  style={{ fontFamily: 'Space Grotesk, sans-serif' }}\n                >\n                  <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                    <path fill=\"currentColor\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                    <path fill=\"currentColor\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                    <path fill=\"currentColor\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                    <path fill=\"currentColor\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                  </svg>\n                  <span>Continue with Google</span>\n                </button>\n\n                {/* Footer */}\n                <p className=\"mt-8 text-center text-gray-600 dark:text-gray-400 font-medium\">\n                  Don't have an account?{' '}\n                  <Link href=\"/signup\" className=\"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-black transition-colors\" style={{ fontFamily: 'Space Grotesk, sans-serif' }}>\n                    Sign up here\n                  </Link>\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </>\n  );\n}","'use client';\n\nimport { useState } from 'react';\nimport { FiAlertTriangle, FiX, FiSmartphone, FiClock } from 'react-icons/fi';\n\ninterface ExistingSession {\n  id: string;\n  deviceName: string;\n  browser: string;\n  os: string;\n  loginTime: string;\n  lastActivity: string;\n  ipAddress: string;\n}\n\ninterface DuplicateSessionModalProps {\n  isOpen: boolean;\n  existingSessions: ExistingSession[];\n  onConfirm: () => void;\n  onCancel: () => void;\n  isLoading?: boolean;\n}\n\nexport default function DuplicateSessionModal({\n  isOpen,\n  existingSessions,\n  onConfirm,\n  onCancel,\n  isLoading = false,\n}: DuplicateSessionModalProps) {\n  const [isConfirming, setIsConfirming] = useState(false);\n\n  if (!isOpen) return null;\n\n  const handleConfirm = async () => {\n    setIsConfirming(true);\n    try {\n      await onConfirm();\n    } finally {\n      setIsConfirming(false);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleString();\n    } catch {\n      return dateString;\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n      <div className=\"w-full max-w-md bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl p-8 mx-4 border border-gray-200 dark:border-gray-700\">\n        {/* Header */}\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/20\">\n            <FiAlertTriangle className=\"h-6 w-6 text-yellow-600 dark:text-yellow-400\" />\n          </div>\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n              Account Already Logged In\n            </h2>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              Detected login from another device\n            </p>\n          </div>\n        </div>\n\n        {/* Alert Message */}\n        <div className=\"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-200 dark:border-yellow-900/50\">\n          <p className=\"text-sm text-yellow-800 dark:text-yellow-300\">\n            Your account is currently logged in from another device. If you continue, all other sessions will be logged out and this device will be the only active session.\n          </p>\n        </div>\n\n        {/* Existing Sessions */}\n        {existingSessions.length > 0 && (\n          <div className=\"mb-6\">\n            <h3 className=\"text-sm font-bold text-gray-900 dark:text-white mb-3\">\n              Active Sessions\n            </h3>\n            <div className=\"space-y-3\">\n              {existingSessions.map((session) => (\n                <div\n                  key={session.id}\n                  className=\"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600\"\n                >\n                  {/* Device Name and Browser */}\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <FiSmartphone className=\"w-4 h-4 text-gray-600 dark:text-gray-400\" />\n                    <span className=\"font-semibold text-gray-900 dark:text-white\">\n                      {session.deviceName}\n                    </span>\n                    <span className=\"text-xs text-gray-600 dark:text-gray-400\">\n                      {session.browser} • {session.os}\n                    </span>\n                  </div>\n\n                  {/* Login Time */}\n                  <div className=\"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400\">\n                    <FiClock className=\"w-3 h-3\" />\n                    <span>\n                      Logged in: {formatDate(session.loginTime)}\n                    </span>\n                  </div>\n\n                  {/* IP Address */}\n                  {session.ipAddress && session.ipAddress !== 'unknown' && (\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                      IP: {session.ipAddress}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Info Message */}\n        <div className=\"mb-6 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-900/50\">\n          <p className=\"text-xs text-blue-800 dark:text-blue-300\">\n            ℹ️ This is a security feature to protect your account from unauthorized access.\n          </p>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex gap-3\">\n          <button\n            onClick={onCancel}\n            disabled={isLoading || isConfirming}\n            className=\"flex-1 px-4 py-3 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleConfirm}\n            disabled={isLoading || isConfirming}\n            className=\"flex-1 px-4 py-3 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n          >\n            {isConfirming ? (\n              <>\n                <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                <span>Processing...</span>\n              </>\n            ) : (\n              'Continue & Logout Other Sessions'\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Device fingerprinting utility\n * Creates a unique identifier for each device/browser combination\n * This ensures only ONE browser can be logged in per account on a device\n */\n\nexport interface DeviceInfo {\n  deviceId: string;\n  fingerprint: string;\n  deviceName: string;\n  browser: string;\n  os: string;\n}\n\n/**\n * Generate a unique device fingerprint based on browser/device characteristics\n * Includes browser type to restrict different browsers on same device\n */\nexport async function generateDeviceFingerprint(): Promise<string> {\n  const { browser, os } = parseUserAgent();\n  \n  const components = {\n    // Get user agent\n    userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : 'unknown',\n    \n    // Include browser type to prevent same-device multi-browser login\n    browser: browser,\n    \n    // Get language\n    language: typeof navigator !== 'undefined' ? navigator.language : 'unknown',\n    \n    // Get timezone\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n    \n    // Get screen resolution\n    screenResolution: typeof window !== 'undefined' \n      ? `${window.screen.width}x${window.screen.height}` \n      : 'unknown',\n    \n    // Get color depth\n    colorDepth: typeof window !== 'undefined' ? window.screen.colorDepth : 'unknown',\n    \n    // Get canvas fingerprint\n    canvasFingerprint: await getCanvasFingerprint(),\n    \n    // Get WebGL fingerprint\n    webglFingerprint: getWebGLFingerprint(),\n  };\n\n  // Create a hash from all components\n  const fingerprintString = JSON.stringify(components);\n  return await hashString(fingerprintString);\n}\n\n/**\n * Get Canvas fingerprint\n */\nfunction getCanvasFingerprint(): Promise<string> {\n  return new Promise((resolve) => {\n    try {\n      const canvas = typeof document !== 'undefined' ? document.createElement('canvas') : null;\n      if (!canvas) {\n        resolve('unknown');\n        return;\n      }\n\n      const ctx = canvas.getContext('2d');\n      if (!ctx) {\n        resolve('unknown');\n        return;\n      }\n\n      const text = 'Canvas fingerprint';\n      ctx.textBaseline = 'top';\n      ctx.font = '14px Arial';\n      ctx.textBaseline = 'alphabetic';\n      ctx.fillStyle = '#f60';\n      ctx.fillRect(125, 1, 62, 20);\n      ctx.fillStyle = '#069';\n      ctx.fillText(text, 2, 15);\n      ctx.fillStyle = 'rgba(102, 204, 0, 0.7)';\n      ctx.fillText(text, 4, 17);\n\n      const canvasData = canvas.toDataURL();\n      resolve(canvasData.substring(0, 50)); // Use first 50 chars as fingerprint\n    } catch (e) {\n      resolve('unknown');\n    }\n  });\n}\n\n/**\n * Get WebGL fingerprint\n */\nfunction getWebGLFingerprint(): string {\n  try {\n    const canvas = typeof document !== 'undefined' ? document.createElement('canvas') : null;\n    if (!canvas) return 'unknown';\n\n    const gl = canvas.getContext('webgl') as WebGLRenderingContext | null;\n    if (!gl) return 'unknown';\n\n    const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');\n    if (debugInfo) {\n      const vendor = gl.getParameter((debugInfo as any).UNMASKED_VENDOR_WEBGL);\n      const renderer = gl.getParameter((debugInfo as any).UNMASKED_RENDERER_WEBGL);\n      return `${vendor}-${renderer}`.substring(0, 50);\n    }\n\n    return 'unknown';\n  } catch (e) {\n    return 'unknown';\n  }\n}\n\n/**\n * Hash a string using SHA-256\n */\nasync function hashString(str: string): Promise<string> {\n  try {\n    const msgBuffer = new TextEncoder().encode(str);\n    const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    const hashHex = hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');\n    return hashHex;\n  } catch (e) {\n    // Fallback to simple hash if crypto API not available\n    return simpleHash(str);\n  }\n}\n\n/**\n * Simple hash function for fallback\n */\nfunction simpleHash(str: string): string {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash = hash & hash; // Convert to 32bit integer\n  }\n  return Math.abs(hash).toString(16);\n}\n\n/**\n * Parse user agent to get browser and OS info\n */\nexport function parseUserAgent(): { browser: string; os: string } {\n  const ua = typeof navigator !== 'undefined' ? navigator.userAgent : '';\n\n  let browserName = 'Unknown';\n  let osName = 'Unknown';\n\n  // Detect browser\n  if (ua.indexOf('Firefox') > -1) {\n    browserName = 'Firefox';\n  } else if (ua.indexOf('Chrome') > -1) {\n    browserName = 'Chrome';\n  } else if (ua.indexOf('Safari') > -1) {\n    browserName = 'Safari';\n  } else if (ua.indexOf('Edge') > -1) {\n    browserName = 'Edge';\n  } else if (ua.indexOf('Opera') > -1 || ua.indexOf('OPR') > -1) {\n    browserName = 'Opera';\n  }\n\n  // Detect OS\n  if (ua.indexOf('Windows') > -1) {\n    osName = 'Windows';\n  } else if (ua.indexOf('Mac') > -1) {\n    osName = 'macOS';\n  } else if (ua.indexOf('X11') > -1) {\n    osName = 'Linux';\n  } else if (ua.indexOf('Linux') > -1) {\n    osName = 'Linux';\n  } else if (ua.indexOf('Android') > -1) {\n    osName = 'Android';\n  } else if (ua.indexOf('iPhone') > -1 || ua.indexOf('iPad') > -1) {\n    osName = 'iOS';\n  }\n\n  return { browser: browserName, os: osName };\n}\n\n/**\n * Generate or retrieve device ID from localStorage\n */\nexport function getOrCreateDeviceId(): string {\n  if (typeof window === 'undefined') return '';\n\n  const DEVICE_ID_KEY = 'nitminer_device_id';\n  let deviceId = localStorage.getItem(DEVICE_ID_KEY);\n\n  if (!deviceId) {\n    // Generate a unique ID\n    deviceId = 'device_' + Date.now() + '_' + Math.random().toString(36).substring(2, 15);\n    localStorage.setItem(DEVICE_ID_KEY, deviceId);\n  }\n\n  return deviceId;\n}\n\n/**\n * Get device name based on user agent\n */\nexport function getDeviceName(): string {\n  const ua = typeof navigator !== 'undefined' ? navigator.userAgent : '';\n  \n  if (ua.indexOf('iPhone') > -1) return 'iPhone';\n  if (ua.indexOf('iPad') > -1) return 'iPad';\n  if (ua.indexOf('Android') > -1) return 'Android Device';\n  if (ua.indexOf('Windows') > -1) return 'Windows PC';\n  if (ua.indexOf('Mac') > -1) return 'Mac';\n  if (ua.indexOf('Linux') > -1) return 'Linux Device';\n  \n  return 'Unknown Device';\n}\n\n/**\n * Generate complete device info\n */\nexport async function generateDeviceInfo(): Promise<DeviceInfo> {\n  const deviceId = getOrCreateDeviceId();\n  const fingerprint = await generateDeviceFingerprint();\n  const { browser, os } = parseUserAgent();\n  const deviceName = getDeviceName();\n\n  return {\n    deviceId,\n    fingerprint,\n    deviceName,\n    browser,\n    os,\n  };\n}\n"],"names":[],"mappings":"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"}