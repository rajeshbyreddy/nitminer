module.exports=[10179,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)(null),[e,f]=(0,c.useState)(!0);(0,c.useEffect)(()=>{g()},[]);let g=async()=>{try{let a=await fetch("/api/admin/overview");if(a.ok){let b=await a.json();d(b)}}catch(a){console.error("Error fetching overview:",a)}finally{f(!1)}};return e?(0,b.jsx)("div",{className:"text-white",children:"Loading..."}):a?(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-white mb-8",children:"Dashboard Overview"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6",children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm mb-2",children:"Total Users"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:a.totalUsers})]}),(0,b.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6",children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm mb-2",children:"Premium Users"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-green-400",children:a.premiumUsers})]}),(0,b.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6",children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm mb-2",children:"Free Trial Users"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-yellow-400",children:a.freeTrialUsers})]}),(0,b.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6",children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm mb-2",children:"Total Revenue"}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-purple-400",children:["â‚¹",(a.totalRevenue/100).toFixed(2)]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6",children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm mb-2",children:"Monthly Revenue (Last 30 Days)"}),(0,b.jsxs)("p",{className:"text-4xl font-bold text-blue-400",children:["â‚¹",(a.monthlyRevenue/100).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Revenue by Plan"}),(0,b.jsx)("div",{className:"space-y-2",children:a.revenueByPlan.map(a=>(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400 capitalize",children:a._id.replace("_"," ")}),(0,b.jsxs)("span",{className:"text-white",children:["â‚¹",(a.total/100).toFixed(2)," (",a.count," sales)"]})]},a._id))})]})]})]}):(0,b.jsx)("div",{className:"text-red-400",children:"Failed to load data"})}var e=a.i(70106);let f=(0,e.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),g=(0,e.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);function h(){let[a,d]=(0,c.useState)([]),[e,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)({name:"",email:"",role:"user"});(0,c.useEffect)(()=>{s()},[k,m]);let s=async()=>{try{let a=new URLSearchParams({page:k.toString(),limit:"10"});m&&a.append("search",m);let b=await fetch(`/api/admin/users?${a}`);if(b.ok){let a=await b.json();d(a.users),h(a.pagination)}}catch(a){console.error("Error fetching users:",a)}finally{j(!1)}},t=async a=>{if(confirm("Are you sure you want to delete this user?"))try{(await fetch(`/api/admin/users/${a}`,{method:"DELETE"})).ok&&(s(),alert("User deleted successfully"))}catch(a){console.error("Error deleting user:",a)}},u=async()=>{try{(await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).ok&&(p(!1),r({name:"",email:"",role:"user"}),s(),alert("User added successfully"))}catch(a){console.error("Error adding user:",a)}};return i?(0,b.jsx)("div",{className:"text-white",children:"Loading..."}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Users Management"}),(0,b.jsx)("button",{onClick:()=>p(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition",children:"+ Add User"})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:m,onChange:a=>{n(a.target.value),l(1)},className:"w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-blue-500"})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left text-sm text-slate-300",children:[(0,b.jsx)("thead",{className:"bg-slate-800 border-b border-slate-700",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Email"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Role"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Premium"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Trials"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-800 transition",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.email}),(0,b.jsx)("td",{className:"px-6 py-4 capitalize",children:a.role}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:a.isPremium?"text-green-400":"text-yellow-400",children:a.isPremium?"Yes":"No"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.trialCount}),(0,b.jsxs)("td",{className:"px-6 py-4 flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>alert("Edit feature coming soon"),className:"text-blue-400 hover:text-blue-300 transition",children:(0,b.jsx)(g,{size:18})}),(0,b.jsx)("button",{onClick:()=>t(a._id),className:"text-red-400 hover:text-red-300 transition",children:(0,b.jsx)(f,{size:18})})]})]},a._id))})]})}),e&&e.pages>1&&(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>l(Math.max(1,k-1)),disabled:1===k,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:text-slate-500 text-white rounded transition",children:"Previous"}),Array.from({length:e.pages},(a,b)=>b+1).map(a=>(0,b.jsx)("button",{onClick:()=>l(a),className:`px-4 py-2 rounded transition ${k===a?"bg-blue-500 text-white":"bg-slate-700 hover:bg-slate-600 text-white"}`,children:a},a)),(0,b.jsx)("button",{onClick:()=>l(Math.min(e.pages,k+1)),disabled:k===e.pages,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:text-slate-500 text-white rounded transition",children:"Next"})]}),o&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-8 max-w-md w-full mx-4",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-6",children:"Add New User"}),(0,b.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,b.jsx)("input",{type:"text",placeholder:"Name",value:q.name,onChange:a=>r({...q,name:a.target.value}),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-500 focus:outline-none focus:border-blue-500"}),(0,b.jsx)("input",{type:"email",placeholder:"Email",value:q.email,onChange:a=>r({...q,email:a.target.value}),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-500 focus:outline-none focus:border-blue-500"}),(0,b.jsxs)("select",{value:q.role,onChange:a=>r({...q,role:a.target.value}),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white focus:outline-none focus:border-blue-500",children:[(0,b.jsx)("option",{value:"user",children:"User"}),(0,b.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded transition",children:"Cancel"}),(0,b.jsx)("button",{onClick:u,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded transition",children:"Add User"})]})]})})]})}var i=a.i(84505);function j(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!0),[j,k]=(0,c.useState)(1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("");(0,c.useEffect)(()=>{p()},[j,l,n]);let p=async()=>{try{let a=new URLSearchParams({page:j.toString(),limit:"20"});l&&a.append("status",l),n&&a.append("plan",n);let b=await fetch(`/api/admin/payments?${a}`);if(b.ok){let a=await b.json();d(a.payments),f(a.pagination)}}catch(a){console.error("Error fetching payments:",a)}finally{h(!1)}},q=async()=>{try{let a=await fetch("/api/admin/export/payments");if(a.ok){let b=await a.blob(),c=window.URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download="payments.csv",document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(c),document.body.removeChild(d)}}catch(a){console.error("Error exporting payments:",a)}};return g?(0,b.jsx)("div",{className:"text-white",children:"Loading..."}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Payments Management"}),(0,b.jsxs)("button",{onClick:q,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition",children:[(0,b.jsx)(i.Download,{size:20}),"Export CSV"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,b.jsxs)("select",{value:l,onChange:a=>{m(a.target.value),k(1)},className:"px-4 py-2 bg-slate-800 border border-slate-700 rounded text-white focus:outline-none focus:border-blue-500",children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"success",children:"Success"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"failed",children:"Failed"})]}),(0,b.jsxs)("select",{value:n,onChange:a=>{o(a.target.value),k(1)},className:"px-4 py-2 bg-slate-800 border border-slate-700 rounded text-white focus:outline-none focus:border-blue-500",children:[(0,b.jsx)("option",{value:"",children:"All Plans"}),(0,b.jsx)("option",{value:"6_months",children:"6 Months"}),(0,b.jsx)("option",{value:"12_months",children:"12 Months"})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left text-sm text-slate-300",children:[(0,b.jsx)("thead",{className:"bg-slate-800 border-b border-slate-700",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"User"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Email"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Plan"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Amount"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Date"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-800 transition",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:a.userId.name}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.userId.email}),(0,b.jsx)("td",{className:"px-6 py-4 capitalize",children:a.plan.replace("_"," ")}),(0,b.jsxs)("td",{className:"px-6 py-4 font-semibold",children:["â‚¹",a.amount]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${"success"===a.status?"bg-green-900 text-green-300":"pending"===a.status?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"}`,children:a.status})}),(0,b.jsx)("td",{className:"px-6 py-4",children:new Date(a.createdAt).toLocaleDateString()})]},a._id))})]})}),e&&e.pages>1&&(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>k(Math.max(1,j-1)),disabled:1===j,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:text-slate-500 text-white rounded transition",children:"Previous"}),Array.from({length:Math.min(e.pages,5)},(a,b)=>b+1).map(a=>(0,b.jsx)("button",{onClick:()=>k(a),className:`px-4 py-2 rounded transition ${j===a?"bg-blue-500 text-white":"bg-slate-700 hover:bg-slate-600 text-white"}`,children:a},a)),(0,b.jsx)("button",{onClick:()=>k(Math.min(e.pages,j+1)),disabled:j===e.pages,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:text-slate-500 text-white rounded transition",children:"Next"})]})]})}function k(){let[a,d]=(0,c.useState)(null),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(!1);(0,c.useEffect)(()=>{i()},[]);let i=async()=>{try{let a=await fetch("/api/admin/settings");if(a.ok){let b=await a.json();d(b)}}catch(a){console.error("Error fetching settings:",a)}finally{f(!1)}},j=async()=>{if(a)try{(await fetch("/api/admin/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(h(!0),setTimeout(()=>h(!1),3e3))}catch(a){console.error("Error saving settings:",a)}};return e?(0,b.jsx)("div",{className:"text-white",children:"Loading..."}):a?(0,b.jsxs)("div",{className:"max-w-2xl",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-white mb-8",children:"System Settings"}),(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Free Trials"}),(0,b.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.freeTrialsEnabled,onChange:b=>d({...a,freeTrialsEnabled:b.target.checked}),className:"w-6 h-6 cursor-pointer"}),(0,b.jsx)("span",{className:"text-white",children:"Enable free trials for new users"})]}),(0,b.jsx)("p",{className:"text-slate-400 text-sm mt-2",children:"When enabled, new users will receive 5 free trials automatically."})]}),(0,b.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-white mb-6",children:"Pricing Plans"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-white mb-2",children:"6-Month Plan Price (â‚¹)"}),(0,b.jsx)("input",{type:"number",value:a.pricing.sixMonths/100,onChange:b=>d({...a,pricing:{...a.pricing,sixMonths:100*parseFloat(b.target.value)}}),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white focus:outline-none focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-white mb-2",children:"12-Month Plan Price (â‚¹)"}),(0,b.jsx)("input",{type:"number",value:a.pricing.twelveMonths/100,onChange:b=>d({...a,pricing:{...a.pricing,twelveMonths:100*parseFloat(b.target.value)}}),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded text-white focus:outline-none focus:border-blue-500"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:j,className:"bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg transition font-semibold",children:"Save Settings"}),g&&(0,b.jsx)("div",{className:"flex items-center text-green-400",children:(0,b.jsx)("span",{children:"âœ“ Settings saved successfully"})})]})]})]}):(0,b.jsx)("div",{className:"text-red-400",children:"Failed to load settings"})}var l=a.i(20005),m=a.i(75003),n=a.i(50944);function o({children:a}){let d=(0,n.useRouter)(),{data:e,status:f}=(0,m.useSession)(),[g,h]=(0,c.useState)(!0);if("loading"===f)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:(0,b.jsx)("div",{className:"text-white",children:"Loading..."})});if("unauthenticated"===f||e?.user?.role!=="admin")return d.push("/login"),null;let i=async()=>{await (0,m.signOut)({callbackUrl:"/login"})};return(0,b.jsxs)("div",{className:"flex h-screen bg-slate-900",children:[(0,b.jsxs)("div",{className:`${g?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 transition-all duration-300 flex flex-col`,children:[(0,b.jsxs)("div",{className:"p-6 flex items-center justify-between",children:[g&&(0,b.jsx)("h1",{className:"text-xl font-bold text-blue-400",children:"TrustInn Admin"}),(0,b.jsx)("button",{onClick:()=>h(!g),className:"text-slate-400 hover:text-white transition",children:"â˜°"})]}),(0,b.jsx)("nav",{className:"flex-1 px-4 space-y-2",children:[{href:"/admin",label:"Overview",icon:"ðŸ“Š"},{href:"/admin/users",label:"Users",icon:"ðŸ‘¥"},{href:"/admin/payments",label:"Payments",icon:"ðŸ’³"},{href:"/admin/logs",label:"Logs",icon:"ðŸ“"},{href:"/admin/settings",label:"Settings",icon:"âš™ï¸"}].map(a=>(0,b.jsxs)("a",{href:a.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-slate-700 text-slate-300 hover:text-white transition",children:[(0,b.jsx)("span",{className:"text-lg",children:a.icon}),g&&(0,b.jsx)("span",{children:a.label})]},a.href))}),(0,b.jsx)("div",{className:"p-4 border-t border-slate-700",children:(0,b.jsxs)("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-red-600 hover:bg-red-700 text-white transition",children:[(0,b.jsx)(l.LogOut,{size:20}),g&&(0,b.jsx)("span",{children:"Logout"})]})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto",children:(0,b.jsx)("div",{className:"p-8",children:a})})]})}function p(){let[a,e]=(0,c.useState)("overview");return(0,b.jsxs)(o,{children:[(0,b.jsx)("div",{className:"flex gap-4 border-b border-slate-700 mb-8 overflow-x-auto",children:[{id:"overview",label:"Overview"},{id:"users",label:"Users"},{id:"payments",label:"Payments"},{id:"settings",label:"Settings"}].map(c=>(0,b.jsx)("button",{onClick:()=>e(c.id),className:`px-6 py-3 font-medium transition whitespace-nowrap ${a===c.id?"text-blue-400 border-b-2 border-blue-400":"text-slate-400 hover:text-white"}`,children:c.label},c.id))}),"overview"===a&&(0,b.jsx)(d,{}),"users"===a&&(0,b.jsx)(h,{}),"payments"===a&&(0,b.jsx)(j,{}),"settings"===a&&(0,b.jsx)(k,{})]})}a.s(["default",()=>p],10179)}];

//# sourceMappingURL=src_app_admin_page_tsx_645532da._.js.map