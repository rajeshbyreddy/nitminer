{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshbyreddy/nitminer/client/src/lib/dbConnect.ts"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst MONGODB_URI = process.env.MONGODB_URI;\n\nif (!MONGODB_URI) {\n  throw new Error('Please define the MONGODB_URI environment variable');\n}\n\ninterface Cached {\n  conn: typeof mongoose | null;\n  promise: Promise<typeof mongoose> | null;\n}\n\nlet cached: Cached = (global as any).mongoose || { conn: null, promise: null };\n\nif (!cached) {\n  cached = (global as any).mongoose = { conn: null, promise: null };\n}\n\nasync function dbConnect() {\n  if (cached.conn) {\n    return cached.conn;\n  }\n\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n    };\n\n    cached.promise = mongoose.connect(MONGODB_URI!, opts).then((mongoose) => {\n      return mongoose;\n    });\n  }\n\n  try {\n    cached.conn = await cached.promise;\n  } catch (e) {\n    cached.promise = null;\n    throw e;\n  }\n\n  return cached.conn;\n}\n\nexport default dbConnect;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MAAM;AAClB;AAOA,IAAI,SAAiB,yDAAgB,QAAQ,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAE7E,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAgB,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAClE;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAc,MAAM,IAAI,CAAC,CAAC;YAC1D,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshbyreddy/nitminer/client/src/models/OTP.ts"],"sourcesContent":["import mongoose, { Schema, Document } from 'mongoose';\n\nexport interface IOTP extends Document {\n  email: string;\n  otp: string;\n  expiresAt: Date;\n  createdAt: Date;\n}\n\nconst otpSchema = new Schema<IOTP>(\n  {\n    email: {\n      type: String,\n      required: true,\n      lowercase: true,\n      trim: true,\n    },\n    otp: {\n      type: String,\n      required: true,\n    },\n    expiresAt: {\n      type: Date,\n      required: true,\n      default: () => new Date(Date.now() + 10 * 60 * 1000), // 10 minutes\n    },\n  },\n  {\n    timestamps: true,\n  }\n);\n\n// Index to auto-delete expired OTPs\notpSchema.index({ expiresAt: 1 }, { expireAfterSeconds: 0 });\n\nconst OTP = mongoose.models.OTP || mongoose.model<IOTP>('OTP', otpSchema);\n\nexport default OTP;"],"names":[],"mappings":";;;;AAAA;;AASA,MAAM,YAAY,IAAI,kKAAM,CAC1B;IACE,OAAO;QACL,MAAM;QACN,UAAU;QACV,WAAW;QACX,MAAM;IACR;IACA,KAAK;QACH,MAAM;QACN,UAAU;IACZ;IACA,WAAW;QACT,MAAM;QACN,UAAU;QACV,SAAS,IAAM,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK;IACjD;AACF,GACA;IACE,YAAY;AACd;AAGF,oCAAoC;AACpC,UAAU,KAAK,CAAC;IAAE,WAAW;AAAE,GAAG;IAAE,oBAAoB;AAAE;AAE1D,MAAM,MAAM,mKAAQ,CAAC,MAAM,CAAC,GAAG,IAAI,mKAAQ,CAAC,KAAK,CAAO,OAAO;uCAEhD"}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshbyreddy/nitminer/client/src/lib/email.ts"],"sourcesContent":["import nodemailer from 'nodemailer';\n\n// Configure your email service here\nconst transporter = nodemailer.createTransport({\n  host: process.env.SMTP_HOST,\n  port: parseInt(process.env.SMTP_PORT || '587'),\n  secure: process.env.SMTP_PORT === '465', // true for 465, false for other ports\n  auth: {\n    user: process.env.SMTP_USER,\n    pass: process.env.SMTP_PASSWORD,\n  },\n});\n\nexport async function sendSubscriptionExpiredEmail(email: string, name: string) {\n  try {\n    await transporter.sendMail({\n      from: process.env.SMTP_FROM,\n      to: email,\n      subject: 'Your Subscription Has Expired',\n      html: `\n        <h1>Hello ${name},</h1>\n        <p>Your premium subscription has expired. Please renew to continue using our tools without limitations.</p>\n        <p>\n          <a href=\"${process.env.NEXT_PUBLIC_API_URL}/pricing\" style=\"background-color: #3b82f6; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;\">\n            Renew Now\n          </a>\n        </p>\n        <p>If you have any questions, please contact our support team.</p>\n      `,\n    });\n    console.log(`Email sent to ${email}`);\n  } catch (error) {\n    console.error('Failed to send email:', error);\n    throw error;\n  }\n}\n\nexport async function sendWelcomeEmail(email: string, name: string) {\n  try {\n    await transporter.sendMail({\n      from: process.env.SMTP_FROM,\n      to: email,\n      subject: 'Welcome to TrustInn!',\n      html: `\n        <h1>Welcome ${name}!</h1>\n        <p>Thank you for joining TrustInn. You now have 5 free trials to explore our tools.</p>\n        <p>\n          <a href=\"${process.env.NEXT_PUBLIC_API_URL}/tools\" style=\"background-color: #3b82f6; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;\">\n            Start Using Tools\n          </a>\n        </p>\n      `,\n    });\n  } catch (error) {\n    console.error('Failed to send welcome email:', error);\n  }\n}\n\nexport async function sendOTP(email: string, otp: string) {\n  try {\n    await transporter.sendMail({\n      from: process.env.SMTP_FROM,\n      to: email,\n      subject: 'Your OTP Code - NITMiner Technologies',\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h1 style=\"color: #333;\">Your OTP Code</h1>\n          <p>Hello,</p>\n          <p>Your one-time password (OTP) for verification is:</p>\n          <div style=\"background: #f8f9fa; padding: 20px; border-radius: 5px; margin: 20px 0; text-align: center;\">\n            <h2 style=\"color: #007bff; font-size: 32px; margin: 0; letter-spacing: 5px;\">${otp}</h2>\n          </div>\n          <p>This code will expire in 10 minutes. Please do not share this code with anyone.</p>\n          <p>If you didn't request this OTP, please ignore this email.</p>\n          <hr style=\"border: none; border-top: 1px solid #eee; margin: 30px 0;\">\n          <p style=\"color: #666; font-size: 12px;\">\n            ¬© 2026 NITMiner Technologies. All rights reserved.\n          </p>\n        </div>\n      `,\n    });\n    console.log(`OTP sent to ${email}`);\n  } catch (error) {\n    console.error('Failed to send OTP:', error);\n    throw error;\n  }\n}\n\nexport async function sendPaymentSuccessEmail(\n  email: string,\n  name: string,\n  amount: number,\n  plan: string,\n  receiptUrl?: string,\n  subscriptionEndDate?: string,\n  transactionId?: string\n) {\n  try {\n    await transporter.sendMail({\n      from: process.env.SMTP_FROM,\n      to: email,\n      subject: 'Payment Successful & Subscription Activated - NITMiner Technologies',\n      html: `\n        <div style=\"font-family: 'Arial', sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa; padding: 20px;\">\n          <!-- Header -->\n          <div style=\"background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); padding: 30px; border-radius: 8px 8px 0 0; text-align: center;\">\n            <h1 style=\"color: white; margin: 0; font-size: 28px;\">‚úÖ Payment Successful</h1>\n          </div>\n\n          <!-- Content -->\n          <div style=\"background: white; padding: 30px;\">\n            <p style=\"color: #333; font-size: 16px; margin-top: 0;\">Hello <strong>${name}</strong>,</p>\n\n            <p style=\"color: #666; font-size: 14px; line-height: 1.6;\">\n              Thank you for your payment! Your premium subscription has been successfully activated. You now have full access to all our tools and features.\n            </p>\n\n            <!-- Order Details Card -->\n            <div style=\"background: #f8f9fa; border-left: 4px solid #3b82f6; padding: 20px; border-radius: 4px; margin: 25px 0;\">\n              <h3 style=\"color: #333; margin-top: 0; font-size: 16px;\">Order Details</h3>\n              <table style=\"width: 100%; border-collapse: collapse;\">\n                <tr>\n                  <td style=\"padding: 8px 0; color: #666; font-size: 14px;\"><strong>Plan:</strong></td>\n                  <td style=\"padding: 8px 0; color: #333; font-size: 14px; text-align: right;\">${plan}</td>\n                </tr>\n                <tr>\n                  <td style=\"padding: 8px 0; color: #666; font-size: 14px;\"><strong>Amount Paid:</strong></td>\n                  <td style=\"padding: 8px 0; color: #333; font-size: 14px; text-align: right;\">‚Çπ${amount}</td>\n                </tr>\n                <tr>\n                  <td style=\"padding: 8px 0; color: #666; font-size: 14px;\"><strong>Payment Status:</strong></td>\n                  <td style=\"padding: 8px 0; color: #28a745; font-size: 14px; text-align: right;\"><strong>Completed</strong></td>\n                </tr>\n                ${transactionId ? `\n                <tr>\n                  <td style=\"padding: 8px 0; color: #666; font-size: 14px;\"><strong>Transaction ID:</strong></td>\n                  <td style=\"padding: 8px 0; color: #333; font-size: 13px; text-align: right; word-break: break-all;\">${transactionId}</td>\n                </tr>\n                ` : ''}\n                ${subscriptionEndDate ? `\n                <tr>\n                  <td style=\"padding: 8px 0; color: #666; font-size: 14px;\"><strong>Subscription Valid Till:</strong></td>\n                  <td style=\"padding: 8px 0; color: #333; font-size: 14px; text-align: right;\">${subscriptionEndDate}</td>\n                </tr>\n                ` : ''}\n              </table>\n            </div>\n\n            <!-- CTA Buttons -->\n            <div style=\"margin: 30px 0; text-align: center;\">\n              <a href=\"${process.env.NEXT_PUBLIC_API_URL}/dashboard\" style=\"display: inline-block; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-right: 10px;\">\n                Go to Dashboard\n              </a>\n              ${receiptUrl ? `\n              <a href=\"${receiptUrl}\" style=\"display: inline-block; background: #6c757d; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; font-weight: bold;\">\n                üì• Download Receipt\n              </a>\n              ` : ''}\n            </div>\n\n            <!-- Support Info -->\n            <div style=\"background: #e7f3ff; border: 1px solid #b3d9ff; padding: 15px; border-radius: 5px; margin: 25px 0;\">\n              <h4 style=\"color: #3b82f6; margin-top: 0; font-size: 14px;\">Need Help?</h4>\n              <p style=\"color: #666; font-size: 13px; margin: 0;\">\n                If you have any questions or need support, please contact us at <strong>support@nitminer.com</strong> or reply to this email.\n              </p>\n            </div>\n\n            <!-- Footer -->\n            <p style=\"color: #999; font-size: 12px; margin: 25px 0 0 0; padding-top: 15px; border-top: 1px solid #e0e0e0;\">\n              This is an automated email. Please do not reply directly. For support, contact our team.\n            </p>\n          </div>\n\n          <!-- Copyright -->\n          <div style=\"background: #f8f9fa; padding: 15px; border-radius: 0 0 8px 8px; text-align: center; font-size: 11px; color: #999;\">\n            <p style=\"margin: 0;\">\n              ¬© 2026 NITMiner Technologies Pvt Ltd. All rights reserved.<br>\n              üìß support@nitminer.com | üåê www.nitminer.com\n            </p>\n          </div>\n        </div>\n      `,\n    });\n    console.log(`Payment confirmation sent to ${email}`);\n  } catch (error) {\n    console.error('Failed to send payment success email:', error);\n    throw error;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEA,oCAAoC;AACpC,MAAM,cAAc,4JAAU,CAAC,eAAe,CAAC;IAC7C,MAAM,QAAQ,GAAG,CAAC,SAAS;IAC3B,MAAM,SAAS,QAAQ,GAAG,CAAC,SAAS,IAAI;IACxC,QAAQ,QAAQ,GAAG,CAAC,SAAS,KAAK;IAClC,MAAM;QACJ,MAAM,QAAQ,GAAG,CAAC,SAAS;QAC3B,MAAM,QAAQ,GAAG,CAAC,aAAa;IACjC;AACF;AAEO,eAAe,6BAA6B,KAAa,EAAE,IAAY;IAC5E,IAAI;QACF,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,QAAQ,GAAG,CAAC,SAAS;YAC3B,IAAI;YACJ,SAAS;YACT,MAAM,CAAC;kBACK,EAAE,KAAK;;;mBAGN,EAAE,QAAQ,GAAG,CAAC,mBAAmB,CAAC;;;;;MAK/C,CAAC;QACH;QACA,QAAQ,GAAG,CAAC,CAAC,cAAc,EAAE,OAAO;IACtC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM;IACR;AACF;AAEO,eAAe,iBAAiB,KAAa,EAAE,IAAY;IAChE,IAAI;QACF,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,QAAQ,GAAG,CAAC,SAAS;YAC3B,IAAI;YACJ,SAAS;YACT,MAAM,CAAC;oBACO,EAAE,KAAK;;;mBAGR,EAAE,QAAQ,GAAG,CAAC,mBAAmB,CAAC;;;;MAI/C,CAAC;QACH;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;IACjD;AACF;AAEO,eAAe,QAAQ,KAAa,EAAE,GAAW;IACtD,IAAI;QACF,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,QAAQ,GAAG,CAAC,SAAS;YAC3B,IAAI;YACJ,SAAS;YACT,MAAM,CAAC;;;;;;yFAM4E,EAAE,IAAI;;;;;;;;;MASzF,CAAC;QACH;QACA,QAAQ,GAAG,CAAC,CAAC,YAAY,EAAE,OAAO;IACpC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,MAAM;IACR;AACF;AAEO,eAAe,wBACpB,KAAa,EACb,IAAY,EACZ,MAAc,EACd,IAAY,EACZ,UAAmB,EACnB,mBAA4B,EAC5B,aAAsB;IAEtB,IAAI;QACF,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,QAAQ,GAAG,CAAC,SAAS;YAC3B,IAAI;YACJ,SAAS;YACT,MAAM,CAAC;;;;;;;;;kFASqE,EAAE,KAAK;;;;;;;;;;;;+FAYM,EAAE,KAAK;;;;gGAIN,EAAE,OAAO;;;;;;gBAMzF,EAAE,gBAAgB,CAAC;;;sHAGmF,EAAE,cAAc;;gBAEtH,CAAC,GAAG,GAAG;gBACP,EAAE,sBAAsB,CAAC;;;+FAGsD,EAAE,oBAAoB;;gBAErG,CAAC,GAAG,GAAG;;;;;;uBAMA,EAAE,QAAQ,GAAG,CAAC,mBAAmB,CAAC;;;cAG3C,EAAE,aAAa,CAAC;uBACP,EAAE,WAAW;;;cAGtB,CAAC,GAAG,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;MAyBf,CAAC;QACH;QACA,QAAQ,GAAG,CAAC,CAAC,6BAA6B,EAAE,OAAO;IACrD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yCAAyC;QACvD,MAAM;IACR;AACF"}},
    {"offset": {"line": 410, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshbyreddy/nitminer/client/src/app/api/auth/send-otp/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport dbConnect from '@/lib/dbConnect';\nimport OTP from '@/models/OTP';\nimport { sendOTP } from '@/lib/email';\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { email } = await req.json();\n\n    if (!email) {\n      return NextResponse.json({ error: 'Email is required' }, { status: 400 });\n    }\n\n    // Basic email validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      return NextResponse.json({ error: 'Invalid email format' }, { status: 400 });\n    }\n\n    await dbConnect();\n\n    // Generate 6-digit OTP\n    const otp = Math.floor(100000 + Math.random() * 900000).toString();\n\n    // Delete any existing OTP for this email\n    await OTP.deleteMany({ email });\n\n    // Save new OTP\n    const otpDoc = new OTP({\n      email,\n      otp,\n      expiresAt: new Date(Date.now() + 10 * 60 * 1000), // 10 minutes\n    });\n\n    await otpDoc.save();\n\n    // Send OTP email\n    await sendOTP(email, otp);\n\n    return NextResponse.json({ message: 'OTP sent successfully' });\n  } catch (error) {\n    console.error('Send OTP error:', error);\n    return NextResponse.json({ error: 'Failed to send OTP' }, { status: 500 });\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,IAAI;QAEhC,IAAI,CAAC,OAAO;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAoB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,yBAAyB;QACzB,MAAM,aAAa;QACnB,IAAI,CAAC,WAAW,IAAI,CAAC,QAAQ;YAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuB,GAAG;gBAAE,QAAQ;YAAI;QAC5E;QAEA,MAAM,IAAA,oIAAS;QAEf,uBAAuB;QACvB,MAAM,MAAM,KAAK,KAAK,CAAC,SAAS,KAAK,MAAM,KAAK,QAAQ,QAAQ;QAEhE,yCAAyC;QACzC,MAAM,iIAAG,CAAC,UAAU,CAAC;YAAE;QAAM;QAE7B,eAAe;QACf,MAAM,SAAS,IAAI,iIAAG,CAAC;YACrB;YACA;YACA,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK;QAC7C;QAEA,MAAM,OAAO,IAAI;QAEjB,iBAAiB;QACjB,MAAM,IAAA,gIAAO,EAAC,OAAO;QAErB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAwB;IAC9D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAqB,GAAG;YAAE,QAAQ;QAAI;IAC1E;AACF"}}]
}