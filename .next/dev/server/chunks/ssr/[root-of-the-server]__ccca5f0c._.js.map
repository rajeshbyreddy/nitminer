{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshbyreddy/nitminer/client/src/components/admin/AnalyticsDashboard.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { DollarSign, CreditCard, TrendingUp, Users, Activity } from 'lucide-react';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  AreaChart,\n  Area\n} from 'recharts';\n\ninterface Payment {\n  _id: string;\n  plan: string;\n  amount: number;\n  status: string;\n  userId: string;\n  createdAt: string;\n}\n\ninterface AnalyticsData {\n  paymentTrends: any[];\n  dailyEarnings: any[];\n  monthlyRevenue: any[];\n  userGrowth: any[];\n}\n\nexport default function AnalyticsDashboard() {\n  const [analytics, setAnalytics] = useState<AnalyticsData>({\n    paymentTrends: [],\n    dailyEarnings: [],\n    monthlyRevenue: [],\n    userGrowth: []\n  });\n  const [loading, setLoading] = useState(true);\n  const [stats, setStats] = useState({\n    totalRevenue: 0,\n    totalPayments: 0,\n    avgPayment: 0,\n    activeUsers: 0,\n    revenueByDay: [] as any[]\n  });\n\n  const formatNumber = (num: number): string => {\n    if (num >= 10000000) {\n      return `₹${(num / 10000000).toFixed(1)}Cr`;\n    } else if (num >= 100000) {\n      return `₹${(num / 100000).toFixed(1)}L`;\n    } else if (num >= 1000) {\n      return `₹${(num / 1000).toFixed(1)}K`;\n    }\n    return `₹${num}`;\n  };\n\n  useEffect(() => {\n    fetchAnalytics();\n  }, []);\n\n  const fetchAnalytics = async () => {\n    try {\n      setLoading(true);\n      const [analyticsRes, paymentsRes] = await Promise.all([\n        fetch('/api/admin/analytics'),\n        fetch('/api/admin/payments?limit=1000')\n      ]);\n\n      const analyticsData = await analyticsRes.json();\n      const paymentsData = await paymentsRes.json();\n\n      const successfulPayments = paymentsData.payments?.filter((p: Payment) => p.status === 'success') || [];\n      const processedData = processAnalyticsData(analyticsData, successfulPayments);\n      setAnalytics(processedData);\n\n      const totalRevenue = successfulPayments.reduce((sum: number, p: Payment) => sum + p.amount, 0);\n      const totalPayments = successfulPayments.length;\n      const avgPayment = totalPayments > 0 ? Math.round((totalRevenue / totalPayments) * 100) / 100 : 0;\n\n      const usersRes = await fetch('/api/admin/users?limit=1');\n      const usersData = await usersRes.json();\n      const activeUsers = usersData.pagination?.totalUsers || 0;\n\n      const sevenDaysAgo = new Date();\n      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 6);\n      \n      const revenueByDayMap = new Map();\n      successfulPayments.forEach(payment => {\n        const paymentDate = new Date(payment.createdAt);\n        if (paymentDate >= sevenDaysAgo && payment.status === 'success') {\n          const dayKey = paymentDate.toISOString().split('T')[0];\n          revenueByDayMap.set(dayKey, (revenueByDayMap.get(dayKey) || 0) + payment.amount);\n        }\n      });\n\n      const revenueByDay = [];\n      for (let i = 6; i >= 0; i--) {\n        const date = new Date();\n        date.setDate(date.getDate() - i);\n        const dayKey = date.toISOString().split('T')[0];\n        const amount = revenueByDayMap.get(dayKey) || 0;\n        revenueByDay.push({\n          date: date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),\n          amount\n        });\n      }\n\n      setStats({\n        totalRevenue,\n        totalPayments,\n        avgPayment,\n        activeUsers,\n        revenueByDay\n      });\n    } catch (error) {\n      console.error('Error fetching analytics:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const processAnalyticsData = (analyticsData: any, payments: Payment[]): AnalyticsData => {\n    const paymentTrends = analyticsData.revenueData?.map((item: any) => ({\n      date: item._id,\n      amount: item.revenue\n    })) || [];\n\n    const dailyEarnings = analyticsData.dailyActivity?.map((item: any) => ({\n      date: new Date(item._id).toLocaleDateString(),\n      amount: item.count\n    })) || [];\n\n    const monthlyMap = new Map();\n    const twelveMonthsAgo = new Date();\n    twelveMonthsAgo.setMonth(twelveMonthsAgo.getMonth() - 11);\n\n    payments.forEach(payment => {\n      const paymentDate = new Date(payment.createdAt);\n      if (paymentDate >= twelveMonthsAgo && payment.status === 'success') {\n        const monthKey = `${paymentDate.getFullYear()}-${String(paymentDate.getMonth() + 1).padStart(2, '0')}`;\n        monthlyMap.set(monthKey, (monthlyMap.get(monthKey) || 0) + payment.amount);\n      }\n    });\n\n    const monthlyRevenue = Array.from(monthlyMap.entries())\n      .map(([month, amount]) => ({\n        month: new Date(month + '-01').toLocaleDateString('en-US', { month: 'short', year: 'numeric' }),\n        amount\n      }))\n      .sort((a, b) => new Date(a.month).getTime() - new Date(b.month).getTime());\n\n    const userGrowth = analyticsData.userGrowth?.map((item: any) => ({\n      month: new Date(item._id).toLocaleDateString('en-US', { month: 'short' }),\n      users: item.count\n    })) || [];\n\n    return {\n      paymentTrends,\n      dailyEarnings,\n      monthlyRevenue,\n      userGrowth\n    };\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-center items-center h-64\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8 font-sans\">\n      {/* Key Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg\">\n              <DollarSign className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Total Revenue</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white font-heading\">{formatNumber(stats.totalRevenue)}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\n              <CreditCard className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Total Payments</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white font-heading\">{stats.totalPayments.toLocaleString()}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg\">\n              <TrendingUp className=\"w-6 h-6 text-purple-600 dark:text-purple-400\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Avg Payment</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white font-heading\">₹{stats.avgPayment.toFixed(2)}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg\">\n              <Users className=\"w-6 h-6 text-orange-600 dark:text-orange-400\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Active Users</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white font-heading\">{stats.activeUsers.toLocaleString()}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Additional Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg\">\n              <TrendingUp className=\"w-6 h-6 text-indigo-600 dark:text-indigo-400\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Revenue Growth</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white font-heading\">\n                {analytics.paymentTrends.length >= 2\n                  ? `${(((analytics.paymentTrends[analytics.paymentTrends.length - 1]?.amount || 0) - (analytics.paymentTrends[analytics.paymentTrends.length - 2]?.amount || 0)) / Math.max(analytics.paymentTrends[analytics.paymentTrends.length - 2]?.amount || 1, 1) * 100).toFixed(1)}%`\n                  : '0%'\n                }\n              </p>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">Last 7 days</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg\">\n              <Users className=\"w-6 h-6 text-emerald-600 dark:text-emerald-400\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">User Growth</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white font-heading\">\n                {analytics.userGrowth.length >= 2\n                  ? `${(((analytics.userGrowth[analytics.userGrowth.length - 1]?.count || 0) - (analytics.userGrowth[analytics.userGrowth.length - 2]?.count || 0)) / Math.max(analytics.userGrowth[analytics.userGrowth.length - 2]?.count || 1, 1) * 100).toFixed(1)}%`\n                  : '0%'\n                }\n              </p>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">Total period</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-rose-100 dark:bg-rose-900/30 rounded-lg\">\n              <DollarSign className=\"w-6 h-6 text-rose-600 dark:text-rose-400\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">ARPU</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white font-heading\">\n                ₹{(stats.activeUsers > 0 ? stats.totalRevenue / stats.activeUsers : 0).toFixed(2)}\n              </p>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">Revenue per user</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg\">\n              <Activity className=\"w-6 h-6 text-cyan-600 dark:text-cyan-400\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Activity Rate</p>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white font-heading\">\n                {stats.activeUsers > 0 ? ((analytics.dailyEarnings.reduce((sum, day) => sum + day.amount, 0) / 7 / stats.activeUsers) * 100).toFixed(1) : 0}%\n              </p>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">Daily active users</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Trend Analysis Charts */}\n      <div className=\"space-y-6\">\n        <h3 className=\"text-xl font-bold text-blue-600 dark:text-blue-400 flex items-center gap-2 font-heading\">\n          <Activity className=\"w-5 h-5\" />\n          Trend Analysis\n        </h3>\n\n        {/* Charts Grid */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Revenue Trend (Last 7 Days) */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6\">\n            <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2 font-heading\">\n              <TrendingUp className=\"w-4 h-4 text-green-600\" />\n              Revenue Trend (Last 7 Days)\n            </h4>\n            {stats.revenueByDay && stats.revenueByDay.length > 0 ? (\n              <div className=\"h-64\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <AreaChart data={stats.revenueByDay}>\n                    <defs>\n                      <linearGradient id=\"colorRevenue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"5%\" stopColor=\"#10B981\" stopOpacity={0.3} />\n                        <stop offset=\"95%\" stopColor=\"#10B981\" stopOpacity={0} />\n                      </linearGradient>\n                    </defs>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\n                    <XAxis dataKey=\"date\" stroke=\"#6B7280\" fontSize={12} />\n                    <YAxis stroke=\"#6B7280\" fontSize={12} tickFormatter={(value) => value.toLocaleString()} />\n                    <Tooltip\n                      contentStyle={{\n                        backgroundColor: '#1F2937',\n                        border: '1px solid #374151',\n                        borderRadius: '8px',\n                        color: '#F9FAFB'\n                      }}\n                      formatter={(value: any) => [`₹${value.toLocaleString('en-IN')}`, 'Revenue']}\n                    />\n                    <Area\n                      type=\"monotone\"\n                      dataKey=\"amount\"\n                      stroke=\"#10B981\"\n                      strokeWidth={2}\n                      fillOpacity={1}\n                      fill=\"url(#colorRevenue)\"\n                    />\n                  </AreaChart>\n                </ResponsiveContainer>\n              </div>\n            ) : (\n              <div className=\"h-64 flex items-center justify-center text-gray-500 dark:text-gray-400\">\n                <p>No revenue data available for the last 7 days</p>\n              </div>\n            )}\n          </div>\n\n          {/* User Growth */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6\">\n            <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2 font-heading\">\n              <Users className=\"w-4 h-4 text-blue-600\" />\n              User Growth Trend\n            </h4>\n            <div className=\"h-64\">\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <LineChart data={analytics.userGrowth}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\n                  <XAxis dataKey=\"month\" stroke=\"#6B7280\" fontSize={12} />\n                  <YAxis stroke=\"#6B7280\" fontSize={12} tickFormatter={(value) => value.toLocaleString()} />\n                  <Tooltip\n                    contentStyle={{\n                      backgroundColor: '#1F2937',\n                      border: '1px solid #374151',\n                      borderRadius: '8px',\n                      color: '#F9FAFB'\n                    }}\n                    formatter={(value: any) => [value.toLocaleString(), 'Users']}\n                  />\n                  <Line\n                    type=\"monotone\"\n                    dataKey=\"users\"\n                    stroke=\"#2563EB\"\n                    strokeWidth={2}\n                    dot={{ fill: '#2563EB', strokeWidth: 2, r: 4 }}\n                    activeDot={{ r: 6, stroke: '#2563EB', strokeWidth: 2, fill: '#fff' }}\n                  />\n                </LineChart>\n              </ResponsiveContainer>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1007, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshbyreddy/nitminer/client/src/components/admin/UsersManagement.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { FiEdit, FiTrash2, FiPlus, FiSearch, FiUser, FiMail, FiCalendar, FiKey } from 'react-icons/fi';\n\ninterface User {\n  _id: string;\n  name: string;\n  email: string;\n  role: string;\n  subscription: {\n    plan: string;\n    status: string;\n    startDate: string;\n    endDate: string;\n    paymentId: string;\n  } | string;\n  createdAt: string;\n  isActive: boolean;\n}\n\nexport default function UsersManagement() {\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    role: 'user',\n    subscription: 'free',\n  });\n\n  const usersPerPage = 10;\n\n  useEffect(() => {\n    fetchUsers();\n  }, [currentPage, searchTerm]);\n\n  const fetchUsers = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(\n        `/api/admin/users?page=${currentPage}&limit=${usersPerPage}&search=${searchTerm}`\n      );\n      const data = await response.json();\n      setUsers(data.users);\n      setTotalPages(data.totalPages);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await fetch('/api/admin/users', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData),\n      });\n\n      if (response.ok) {\n        setShowAddModal(false);\n        setFormData({ name: '', email: '', password: '', role: 'user', subscription: 'free' });\n        fetchUsers();\n      }\n    } catch (error) {\n      console.error('Error adding user:', error);\n    }\n  };\n\n  const handleEditUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!selectedUser) return;\n\n    try {\n      const response = await fetch(`/api/admin/users/${selectedUser._id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData),\n      });\n\n      if (response.ok) {\n        setShowEditModal(false);\n        setSelectedUser(null);\n        setFormData({ name: '', email: '', password: '', role: 'user', subscription: 'free' });\n        fetchUsers();\n      }\n    } catch (error) {\n      console.error('Error updating user:', error);\n    }\n  };\n\n  const handleUpdatePassword = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!selectedUser) return;\n\n    try {\n      const response = await fetch(`/api/admin/users/${selectedUser._id}/password`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ password: formData.password }),\n      });\n\n      if (response.ok) {\n        setShowPasswordModal(false);\n        setSelectedUser(null);\n        setFormData({ name: '', email: '', password: '', role: 'user', subscription: 'free' });\n      }\n    } catch (error) {\n      console.error('Error updating password:', error);\n    }\n  };\n\n  const handleDeleteUser = async (userId: string) => {\n    if (!confirm('Are you sure you want to delete this user?')) return;\n\n    try {\n      const response = await fetch(`/api/admin/users/${userId}`, {\n        method: 'DELETE',\n      });\n\n      if (response.ok) {\n        fetchUsers();\n      }\n    } catch (error) {\n      console.error('Error deleting user:', error);\n    }\n  };\n\n  const openEditModal = (user: User) => {\n    setSelectedUser(user);\n    setFormData({\n      name: user.name,\n      email: user.email,\n      password: '',\n      role: user.role,\n      subscription: typeof user.subscription === 'object' ? user.subscription.plan : user.subscription,\n    });\n    setShowEditModal(true);\n  };\n\n  const openPasswordModal = (user: User) => {\n    setSelectedUser(user);\n    setFormData({ ...formData, password: '' });\n    setShowPasswordModal(true);\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 h-full flex flex-col font-sans\">\n      <div className=\"p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n        <div className=\"flex justify-between items-center\">\n          <h2 className=\"text-xl font-bold text-blue-600 dark:text-blue-400 font-heading\">Users Management</h2>\n          <button\n            onClick={() => setShowAddModal(true)}\n            className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm font-medium\"\n          >\n            <FiPlus className=\"mr-2\" size={16} />\n            Add User\n          </button>\n        </div>\n\n        {/* Search */}\n        <div className=\"mt-4 relative\">\n          <FiSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n          <input\n            type=\"text\"\n            placeholder=\"Search users...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n          />\n        </div>\n      </div>\n\n      <div className=\"overflow-x-auto flex-1 overflow-y-auto\">\n        <table className=\"w-full\">\n          <thead className=\"bg-gray-50 dark:bg-gray-700 sticky top-0\">\n            <tr>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                User\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Role\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Subscription\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Status\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Created\n              </th>\n              <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n            {loading ? (\n              <tr>\n                <td colSpan={6} className=\"px-6 py-4 text-center\">\n                  <div className=\"flex justify-center\">\n                    <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n                  </div>\n                </td>\n              </tr>\n            ) : users.length === 0 ? (\n              <tr>\n                <td colSpan={6} className=\"px-6 py-4 text-center text-gray-500 dark:text-gray-400\">\n                  No users found\n                </td>\n              </tr>\n            ) : (\n              users.map((user) => (\n                <tr key={user._id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\">\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 h-10 w-10\">\n                        <div className=\"h-10 w-10 rounded-full bg-blue-600 flex items-center justify-center\">\n                          <FiUser className=\"text-white\" size={16} />\n                        </div>\n                      </div>\n                      <div className=\"ml-4\">\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{user.name}</div>\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">{user.email}</div>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                      user.role === 'admin'\n                        ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300'\n                        : 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300'\n                    }`}>\n                      {user.role}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                    {typeof user.subscription === 'object' ? user.subscription.plan : user.subscription}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                      user.isActive\n                        ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300'\n                        : 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300'\n                    }`}>\n                      {user.isActive ? 'Active' : 'Inactive'}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n                    {new Date(user.createdAt).toLocaleDateString()}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                    <div className=\"flex justify-end space-x-2\">\n                      <button\n                        onClick={() => openEditModal(user)}\n                        className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 transition-colors\"\n                      >\n                        <FiEdit size={16} />\n                      </button>\n                      <button\n                        onClick={() => openPasswordModal(user)}\n                        className=\"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300 transition-colors\"\n                      >\n                        <FiKey size={16} />\n                      </button>\n                      <button\n                        onClick={() => handleDeleteUser(user._id)}\n                        className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors\"\n                      >\n                        <FiTrash2 size={16} />\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Pagination */}\n      {totalPages > 1 && (\n        <div className=\"px-6 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0\">\n          <div className=\"text-sm text-gray-700 dark:text-gray-300\">\n            Page {currentPage} of {totalPages}\n          </div>\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n              disabled={currentPage === 1}\n              className=\"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\n            >\n              Previous\n            </button>\n            <button\n              onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\n              disabled={currentPage === totalPages}\n              className=\"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\n            >\n              Next\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Add User Modal */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-6 w-full max-w-md\">\n            <h3 className=\"text-lg font-bold mb-4 text-blue-600 dark:text-blue-400 font-heading\">Add New User</h3>\n            <form onSubmit={handleAddUser}>\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Name</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Email</label>\n                  <input\n                    type=\"email\"\n                    value={formData.email}\n                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Password</label>\n                  <input\n                    type=\"password\"\n                    value={formData.password}\n                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Role</label>\n                  <select\n                    value={formData.role}\n                    onChange={(e) => setFormData({ ...formData, role: e.target.value })}\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"user\">User</option>\n                    <option value=\"admin\">Admin</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Subscription</label>\n                  <select\n                    value={formData.subscription}\n                    onChange={(e) => setFormData({ ...formData, subscription: e.target.value })}\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"free\">Free</option>\n                    <option value=\"1_month\">1 Month</option>\n                    <option value=\"6_months\">6 Months</option>\n                    <option value=\"12_months\">12 Months</option>\n                  </select>\n                </div>\n              </div>\n              <div className=\"mt-6 flex justify-end space-x-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowAddModal(false)}\n                  className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md border border-gray-300 dark:border-gray-600 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md shadow-sm transition-colors\"\n                >\n                  Add User\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Edit User Modal */}\n      {showEditModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-6 w-full max-w-md\">\n            <h3 className=\"text-lg font-bold mb-4 text-blue-600 dark:text-blue-400 font-heading\">Edit User</h3>\n            <form onSubmit={handleEditUser}>\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Name</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Email</label>\n                  <input\n                    type=\"email\"\n                    value={formData.email}\n                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Role</label>\n                  <select\n                    value={formData.role}\n                    onChange={(e) => setFormData({ ...formData, role: e.target.value })}\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"user\">User</option>\n                    <option value=\"admin\">Admin</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Subscription</label>\n                  <select\n                    value={formData.subscription}\n                    onChange={(e) => setFormData({ ...formData, subscription: e.target.value })}\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"free\">Free</option>\n                    <option value=\"1_month\">1 Month</option>\n                    <option value=\"6_months\">6 Months</option>\n                    <option value=\"12_months\">12 Months</option>\n                  </select>\n                </div>\n              </div>\n              <div className=\"mt-6 flex justify-end space-x-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowEditModal(false)}\n                  className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md border border-gray-300 dark:border-gray-600 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md shadow-sm transition-colors\"\n                >\n                  Update User\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Password Update Modal */}\n      {showPasswordModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-6 w-full max-w-md\">\n            <h3 className=\"text-lg font-bold mb-4 text-blue-600 dark:text-blue-400 font-heading\">Update Password</h3>\n            <form onSubmit={handleUpdatePassword}>\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">New Password</label>\n                  <input\n                    type=\"password\"\n                    value={formData.password}\n                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500\"\n                    required\n                  />\n                </div>\n              </div>\n              <div className=\"mt-6 flex justify-end space-x-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPasswordModal(false)}\n                  className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md border border-gray-300 dark:border-gray-600 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md shadow-sm transition-colors\"\n                >\n                  Update Password\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2215, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshbyreddy/nitminer/client/src/components/admin/PaymentsManagement.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { FiCreditCard, FiSearch, FiEye, FiDownload, FiFilter } from 'react-icons/fi';\n\ninterface Payment {\n  _id: string;\n  userId: {\n    name: string;\n    email: string;\n  };\n  amount: number;\n  status: string;\n  plan: string;\n  paymentMethod: string;\n  paymentId: string;\n  createdAt: string;\n}\n\nexport default function PaymentsManagement() {\n  const [payments, setPayments] = useState<Payment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [totalPayments, setTotalPayments] = useState(0);\n  const [totalRevenue, setTotalRevenue] = useState(0);\n  const [successfulPaymentsCount, setSuccessfulPaymentsCount] = useState(0);\n\n  const paymentsPerPage = 10;\n\n  useEffect(() => {\n    fetchPayments();\n  }, [currentPage, searchTerm, statusFilter]);\n\n  const fetchPayments = async () => {\n    try {\n      setLoading(true);\n      const params = new URLSearchParams({\n        page: currentPage.toString(),\n        limit: paymentsPerPage.toString(),\n        search: searchTerm,\n        status: statusFilter,\n      });\n\n      const response = await fetch(`/api/admin/payments?${params}`);\n      const data = await response.json();\n      setPayments(data.payments);\n      setTotalPages(data.pagination.totalPages);\n      setTotalPayments(data.pagination.totalPayments);\n      setTotalRevenue(data.totalRevenue);\n      setSuccessfulPaymentsCount(data.successfulPaymentsCount);\n    } catch (error) {\n      console.error('Error fetching payments:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'completed':\n      case 'success':\n        return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\n      case 'failed':\n      case 'cancelled':\n        return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300';\n      default:\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300';\n    }\n  };\n\n  const formatCurrency = (amount: number) => {\n    return `₹${amount.toLocaleString('en-IN')}`;\n  };\n\n  const exportPayments = () => {\n    const headers = ['Date', 'User', 'Email', 'Amount (₹)', 'Plan', 'Status', 'Payment Method', 'Transaction ID'];\n    const csvContent = [\n      headers.join(','),\n      ...payments.map(payment => [\n        new Date(payment.createdAt).toLocaleDateString(),\n        `\"${payment.userId.name}\"`,\n        payment.userId.email,\n        payment.amount,\n        payment.plan,\n        payment.status,\n        payment.paymentMethod,\n        payment.paymentId,\n      ].join(','))\n    ].join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `payments-${new Date().toISOString().split('T')[0]}.csv`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 font-sans\">\n      <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-bold text-blue-600 dark:text-blue-400 font-heading\">Payments Management</h2>\n          <button\n            onClick={exportPayments}\n            className=\"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-sm font-medium\"\n          >\n            <FiDownload className=\"mr-2\" size={16} />\n            Export CSV\n          </button>\n        </div>\n\n        {/* Summary Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800\">\n            <div className=\"text-sm text-blue-600 dark:text-blue-400 font-medium\">Total Payments</div>\n            <div className=\"text-2xl font-bold text-blue-900 dark:text-blue-100 font-heading\">{totalPayments}</div>\n          </div>\n          <div className=\"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-100 dark:border-green-800\">\n            <div className=\"text-sm text-green-600 dark:text-green-400 font-medium\">Total Revenue</div>\n            <div className=\"text-2xl font-bold text-green-900 dark:text-green-100 font-heading\">{formatCurrency(totalRevenue)}</div>\n          </div>\n          <div className=\"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-100 dark:border-purple-800\">\n            <div className=\"text-sm text-purple-600 dark:text-purple-400 font-medium\">Avg. Transaction</div>\n            <div className=\"text-2xl font-bold text-purple-900 dark:text-purple-100 font-heading\">\n              {successfulPaymentsCount > 0 ? formatCurrency(totalRevenue / successfulPaymentsCount) : formatCurrency(0)}\n            </div>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"flex flex-col md:flex-row gap-4\">\n          <div className=\"flex-1 relative\">\n            <FiSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n            <input\n              type=\"text\"\n              placeholder=\"Search by user name or email...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n            />\n          </div>\n          <div className=\"relative\">\n            <FiFilter className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n            <select\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value)}\n              className=\"pl-10 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white appearance-none min-w-[160px]\"\n            >\n              <option value=\"\">All Status</option>\n              <option value=\"completed\">Completed</option>\n              <option value=\"pending\">Pending</option>\n              <option value=\"failed\">Failed</option>\n              <option value=\"cancelled\">Cancelled</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full\">\n          <thead className=\"bg-gray-50 dark:bg-gray-700\">\n            <tr>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Date\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                User\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Amount\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Plan\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Status\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Method\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider\">\n                Transaction ID\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n            {loading ? (\n              <tr>\n                <td colSpan={7} className=\"px-6 py-4 text-center\">\n                  <div className=\"flex justify-center\">\n                    <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n                  </div>\n                </td>\n              </tr>\n            ) : payments.length === 0 ? (\n              <tr>\n                <td colSpan={7} className=\"px-6 py-4 text-center text-gray-500 dark:text-gray-400\">\n                  No payments found\n                </td>\n              </tr>\n            ) : (\n              payments.map((payment) => (\n                <tr key={payment._id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\">\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                    {new Date(payment.createdAt).toLocaleDateString()}\n                    <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      {new Date(payment.createdAt).toLocaleTimeString()}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{payment.userId.name}</div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">{payment.userId.email}</div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                      {formatCurrency(payment.amount)}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300\">\n                      {payment.plan}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(payment.status)}`}>\n                      {payment.status}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n                    {payment.paymentMethod}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 font-mono\">\n                    {payment.status === 'success' ? payment.paymentId : '-'}\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Pagination */}\n      {totalPages > 1 && (\n        <div className=\"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between\">\n          <div className=\"text-sm text-gray-700 dark:text-gray-300\">\n            Showing {((currentPage - 1) * paymentsPerPage) + 1} to {Math.min(currentPage * paymentsPerPage, totalPayments)} of {totalPayments} payments\n          </div>\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n              disabled={currentPage === 1}\n              className=\"px-4 py-2 text-sm font-medium border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\n            >\n              Previous\n            </button>\n            <span className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300\">\n              Page {currentPage} of {totalPages}\n            </span>\n            <button\n              onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\n              disabled={currentPage === totalPages}\n              className=\"px-4 py-2 text-sm font-medium border border-gray-300 dark:border-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\n            >\n              Next\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2884, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajeshbyreddy/nitminer/client/src/app/admin/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useSession, signOut } from 'next-auth/react';\nimport { useRouter } from 'next/navigation';\nimport { useEffect, useState } from 'react';\nimport { FiLogOut, FiBarChart, FiUsers, FiCreditCard, FiPieChart, FiSettings, FiUser, FiMenu, FiX } from 'react-icons/fi';\nimport AnalyticsDashboard from '@/components/admin/AnalyticsDashboard';\nimport UsersManagement from '@/components/admin/UsersManagement';\nimport PaymentsManagement from '@/components/admin/PaymentsManagement';\nimport { Footer } from '@/components/Footer';\nimport Header from '@/components/Header';\n\nexport default function AdminDashboard() {\n  const { data: session, status } = useSession();\n  const router = useRouter();\n  const [activeTab, setActiveTab] = useState('overview');\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n\n  useEffect(() => {\n    if (status === 'loading') return;\n\n    if (!session?.user || session.user.role !== 'admin') {\n      router.push('/admin/login');\n      return;\n    }\n  }, [session, status, router]);\n\n  const handleLogout = async () => {\n    await signOut({ callbackUrl: '/login', redirect: true });\n  };\n\n  if (status === 'loading') {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (!session?.user || session.user.role !== 'admin') {\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 relative font-sans\">\n      {/* <Header/> */}\n      {/* Sidebar */}\n      <div className={`fixed top-0 left-0 h-screen bg-white dark:bg-gray-800 shadow-xl z-10 transition-all duration-300 ${sidebarCollapsed ? 'w-16' : 'w-64'} border-r border-gray-200 dark:border-gray-700`}>\n        <div className=\"flex flex-col h-full\">\n          {/* Logo/Title and Toggle Button */}\n          <div className={`flex items-center ${sidebarCollapsed ? 'justify-center' : 'justify-between'} h-16 px-4 border-b border-gray-200 dark:border-gray-700`}>\n            {!sidebarCollapsed && (\n              <h1 className=\"text-xl font-bold text-blue-600 dark:text-blue-400 font-heading\">\n                Admin Panel\n              </h1>\n            )}\n            <button\n              onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\n              className=\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300\"\n            >\n              {sidebarCollapsed ? <FiMenu size={20} /> : <FiX size={20} />}\n            </button>\n          </div>\n\n          {/* Navigation */}\n          <nav className={`flex-1 ${sidebarCollapsed ? 'px-2' : 'px-4'} py-6 space-y-2`}>\n            <button\n              onClick={() => setActiveTab('overview')}\n              className={`w-full flex items-center ${sidebarCollapsed ? 'px-3 py-3 justify-center' : 'px-4 py-3'} text-sm font-medium rounded-lg transition-all duration-200 ${\n                activeTab === 'overview'\n                  ? 'bg-blue-600 text-white shadow-md'\n                  : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white'\n              }`}\n              title={sidebarCollapsed ? 'Overview' : ''}\n            >\n              <FiBarChart size={18} />\n              {!sidebarCollapsed && <span className=\"ml-3\">Overview</span>}\n            </button>\n            <button\n              onClick={() => setActiveTab('users')}\n              className={`w-full flex items-center ${sidebarCollapsed ? 'px-3 py-3 justify-center' : 'px-4 py-3'} text-sm font-medium rounded-lg transition-all duration-200 ${\n                activeTab === 'users'\n                  ? 'bg-blue-600 text-white shadow-md'\n                  : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white'\n              }`}\n              title={sidebarCollapsed ? 'All Users' : ''}\n            >\n              <FiUsers size={18} />\n              {!sidebarCollapsed && <span className=\"ml-3\">All Users</span>}\n            </button>\n            <button\n              onClick={() => setActiveTab('payments')}\n              className={`w-full flex items-center ${sidebarCollapsed ? 'px-3 py-3 justify-center' : 'px-4 py-3'} text-sm font-medium rounded-lg transition-all duration-200 ${\n                activeTab === 'payments'\n                  ? 'bg-blue-600 text-white shadow-md'\n                  : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white'\n              }`}\n              title={sidebarCollapsed ? 'Payment Details' : ''}\n            >\n              <FiCreditCard size={18} />\n              {!sidebarCollapsed && <span className=\"ml-3\">Payment Details</span>}\n            </button>\n            <button\n              onClick={() => setActiveTab('analytics')}\n              className={`w-full flex items-center ${sidebarCollapsed ? 'px-3 py-3 justify-center' : 'px-4 py-3'} text-sm font-medium rounded-lg transition-all duration-200 ${\n                activeTab === 'analytics'\n                  ? 'bg-blue-600 text-white shadow-md'\n                  : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white'\n              }`}\n              title={sidebarCollapsed ? 'Analytics' : ''}\n            >\n              <FiPieChart size={18} />\n              {!sidebarCollapsed && <span className=\"ml-3\">Analytics</span>}\n            </button>\n            <button\n              onClick={() => setActiveTab('settings')}\n              className={`w-full flex items-center ${sidebarCollapsed ? 'px-3 py-3 justify-center' : 'px-4 py-3'} text-sm font-medium rounded-lg transition-all duration-200 ${\n                activeTab === 'settings'\n                  ? 'bg-blue-600 text-white shadow-md'\n                  : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white'\n              }`}\n              title={sidebarCollapsed ? 'Settings' : ''}\n            >\n              <FiSettings size={18} />\n              {!sidebarCollapsed && <span className=\"ml-3\">Settings</span>}\n            </button>\n          </nav>\n\n          {/* User Info & Logout */}\n          <div className={`${sidebarCollapsed ? 'p-2' : 'p-4'} border-t border-gray-200 dark:border-gray-700`}>\n            {!sidebarCollapsed && (\n              <div className=\"flex items-center mb-4\">\n                <div className=\"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center\">\n                  <FiUser className=\"text-white\" size={18} />\n                </div>\n                <div className=\"ml-3\">\n                  <p className=\"text-sm font-semibold text-gray-900 dark:text-white\">{session.user.name}</p>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400\">Administrator</p>\n                </div>\n              </div>\n            )}\n            <button\n              onClick={handleLogout}\n              className={`w-full flex items-center ${sidebarCollapsed ? 'px-3 py-3 justify-center' : 'px-4 py-2'} text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-700 rounded-lg transition-colors`}\n              title={sidebarCollapsed ? 'Logout' : ''}\n            >\n              <FiLogOut size={16} />\n              {!sidebarCollapsed && <span className=\"ml-3\">Logout</span>}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content and Footer Container */}\n      <div className={`min-h-screen flex flex-col transition-all duration-300 ${sidebarCollapsed ? 'ml-16' : 'ml-64'}`}>\n        {/* Main Content */}\n        <div className=\"flex-1 flex flex-col overflow-y-auto\">\n          {/* Header */}\n          <header className=\"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700\">\n            <div className=\"px-6 py-4\">\n              <h2 className=\"text-2xl font-bold text-blue-600 dark:text-blue-400 font-heading\">\n                {activeTab === 'overview' && 'Dashboard Overview'}\n                {activeTab === 'users' && 'User Management'}\n                {activeTab === 'payments' && 'Payment Management'}\n                {activeTab === 'analytics' && 'Analytics & Reports'}\n                {activeTab === 'settings' && 'Admin Settings'}\n              </h2>\n            </div>\n          </header>\n\n          {/* Content */}\n          <main className=\"flex-1 p-6\">\n            <div className=\"space-y-8\">\n              {activeTab === 'overview' && <AnalyticsDashboard />}\n              {activeTab === 'users' && <UsersManagement />}\n              {activeTab === 'payments' && <PaymentsManagement />}\n              {activeTab === 'analytics' && <AnalyticsDashboard />}\n              {activeTab === 'settings' && (\n                <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 font-heading\">Admin Settings</h3>\n                  <p className=\"text-gray-600 dark:text-gray-400\">Admin settings and configuration options will be available here.</p>\n                </div>\n              )}\n            </div>\n          </main>\n        </div>\n\n        \n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}