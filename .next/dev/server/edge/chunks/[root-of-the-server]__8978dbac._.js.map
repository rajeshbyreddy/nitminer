{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { withAuth, NextRequestWithAuth } from 'next-auth/middleware';\nimport { NextResponse } from 'next/server';\n\nexport default withAuth(\n  function middleware(request: NextRequestWithAuth) {\n    const pathname = request.nextUrl.pathname;\n    const userRole = request.nextauth.token?.role as string;\n\n    // Protect /dashboard routes - only authenticated users\n    if (pathname.startsWith('/dashboard')) {\n      if (!request.nextauth.token) {\n        return NextResponse.redirect(new URL('/login', request.url));\n      }\n    }\n\n    // Protect /admin routes - only admins (except login page)\n    if (pathname.startsWith('/admin') && !pathname.startsWith('/admin/login')) {\n      if (!request.nextauth.token || userRole !== 'admin') {\n        return NextResponse.redirect(new URL('/admin/login', request.url));\n      }\n    }\n\n    return NextResponse.next();\n  },\n  {\n    callbacks: {\n      authorized: ({ token, req }) => {\n        const pathname = req.nextUrl.pathname;\n\n        // Allow access to admin login page\n        if (pathname === '/admin/login') {\n          return true;\n        }\n\n        // Protect dashboard and admin routes\n        if (pathname.startsWith('/dashboard') || pathname.startsWith('/admin')) {\n          return !!token;\n        }\n        return true;\n      },\n    },\n  }\n);\n\nexport const config = {\n  matcher: ['/dashboard/:path*', '/admin/:path*'],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;uCAEe,IAAA,8JAAQ,EACrB,SAAS,WAAW,OAA4B;IAC9C,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IACzC,MAAM,WAAW,QAAQ,QAAQ,CAAC,KAAK,EAAE;IAEzC,uDAAuD;IACvD,IAAI,SAAS,UAAU,CAAC,eAAe;QACrC,IAAI,CAAC,QAAQ,QAAQ,CAAC,KAAK,EAAE;YAC3B,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC5D;IACF;IAEA,0DAA0D;IAC1D,IAAI,SAAS,UAAU,CAAC,aAAa,CAAC,SAAS,UAAU,CAAC,iBAAiB;QACzE,IAAI,CAAC,QAAQ,QAAQ,CAAC,KAAK,IAAI,aAAa,SAAS;YACnD,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,gBAAgB,QAAQ,GAAG;QAClE;IACF;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B,GACA;IACE,WAAW;QACT,YAAY,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE;YACzB,MAAM,WAAW,IAAI,OAAO,CAAC,QAAQ;YAErC,mCAAmC;YACnC,IAAI,aAAa,gBAAgB;gBAC/B,OAAO;YACT;YAEA,qCAAqC;YACrC,IAAI,SAAS,UAAU,CAAC,iBAAiB,SAAS,UAAU,CAAC,WAAW;gBACtE,OAAO,CAAC,CAAC;YACX;YACA,OAAO;QACT;IACF;AACF;AAGK,MAAM,SAAS;IACpB,SAAS;QAAC;QAAqB;KAAgB;AACjD"}}]
}